<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="800" height="600" viewBox="0 0 800 600">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  <style>
    .title {
      font-family: Arial, sans-serif;
      font-size: 24px;
      font-weight: bold;
    }
    .component {
      fill: #E1F5FE;
      stroke: #0288D1;
      stroke-width: 2;
      rx: 10;
      ry: 10;
    }
    .security {
      fill: #FFEBEE;
      stroke: #D32F2F;
      stroke-width: 2;
      rx: 10;
      ry: 10;
    }
    .database {
      fill: #E8F5E9;
      stroke: #388E3C;
      stroke-width: 2;
    }
    .external {
      fill: #FFF3E0;
      stroke: #F57C00;
      stroke-width: 2;
      rx: 10;
      ry: 10;
    }
    .label {
      font-family: Arial, sans-serif;
      font-size: 14px;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    .arrow {
      stroke: #616161;
      stroke-width: 2;
      fill: none;
      marker-end: url(#arrowhead);
    }
    .description {
      font-family: Arial, sans-serif;
      font-size: 12px;
      text-anchor: middle;
      fill: #616161;
    }
    .note {
      font-family: Arial, sans-serif;
      font-size: 12px;
      fill: #616161;
    }
  </style>

  <!-- Title -->
  <text x="400" y="40" class="title">Bible API Security Architecture</text>

  <!-- Client -->
  <rect x="350" y="80" width="100" height="50" class="external" />
  <text x="400" y="105" class="label">Client</text>

  <!-- Security Components -->
  <rect x="150" y="180" width="500" height="320" rx="10" ry="10" fill="#F5F5F5" stroke="#9E9E9E" stroke-width="2" />
  <text x="400" y="200" class="label">Spring Security Framework</text>

  <!-- JWT Authentication Filter -->
  <rect x="180" y="230" width="180" height="50" class="security" />
  <text x="270" y="255" class="label">JWT Authentication Filter</text>

  <!-- Authentication Provider -->
  <rect x="440" y="230" width="180" height="50" class="security" />
  <text x="530" y="255" class="label">Authentication Provider</text>

  <!-- User Details Service -->
  <rect x="180" y="310" width="180" height="50" class="component" />
  <text x="270" y="335" class="label">User Details Service</text>

  <!-- Password Encoder -->
  <rect x="440" y="310" width="180" height="50" class="security" />
  <text x="530" y="335" class="label">BCrypt Password Encoder</text>

  <!-- Role-Based Access Control -->
  <rect x="180" y="390" width="180" height="50" class="security" />
  <text x="270" y="415" class="label">Role-Based Access Control</text>

  <!-- Method Security -->
  <rect x="440" y="390" width="180" height="50" class="security" />
  <text x="530" y="415" class="label">Method Security</text>

  <!-- Email Verification -->
  <rect x="310" y="440" width="180" height="50" class="security" />
  <text x="400" y="465" class="label">Email Verification</text>

  <!-- Database -->
  <ellipse cx="270" cy="540" rx="80" ry="40" class="database" />
  <text x="270" y="540" class="label">User &amp; Role Data</text>

  <!-- Redis -->
  <ellipse cx="530" cy="540" rx="80" ry="40" class="database" />
  <text x="530" y="540" class="label">Redis (OTP Storage)</text>

  <!-- Connections -->
  <path d="M 400 130 L 400 180" class="arrow" />
  <text x="420" y="155" class="description">HTTP Request</text>

  <path d="M 270 280 L 270 310" class="arrow" />
  <path d="M 530 280 L 530 310" class="arrow" />

  <path d="M 270 360 L 270 390" class="arrow" />
  <path d="M 530 360 L 530 390" class="arrow" />

  <path d="M 270 440 L 310 440" class="arrow" />
  <path d="M 530 440 L 490 440" class="arrow" />

  <path d="M 270 490 L 270 500" class="arrow" />
  <path d="M 530 490 L 530 500" class="arrow" />

  <!-- Notes -->
  <rect x="600" y="230" width="180" height="120" fill="#FFFDE7" stroke="#FBC02D" stroke-width="1" rx="5" ry="5" />
  <text x="610" y="250" class="note" text-anchor="start">Security Features:</text>
  <text x="610" y="270" class="note" text-anchor="start">- JWT Authentication</text>
  <text x="610" y="290" class="note" text-anchor="start">- Role-Based Access Control</text>
  <text x="610" y="310" class="note" text-anchor="start">- Password Encryption</text>
  <text x="610" y="330" class="note" text-anchor="start">- Email Verification</text>

  <!-- Legend -->
  <rect x="620" y="380" width="20" height="20" class="component" />
  <text x="645" y="395" class="description" text-anchor="start">Application Component</text>

  <rect x="620" y="410" width="20" height="20" class="security" />
  <text x="645" y="425" class="description" text-anchor="start">Security Component</text>

  <rect x="620" y="440" width="20" height="20" class="database" />
  <text x="645" y="455" class="description" text-anchor="start">Database</text>

  <rect x="620" y="470" width="20" height="20" class="external" />
  <text x="645" y="485" class="description" text-anchor="start">External System</text>
</svg>
